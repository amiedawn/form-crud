<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <title>CRUD Form</title>
  </head>
  <body>
    <script>
      let inputForm = document.querySelector("#input-form");
      let parentFirstName = document.querySelector("#parent-first-name");
      let parentLastName = document.querySelector("#parent-last-name");
      let email = document.querySelector("#email");
      let childName = document.querySelector("#child-name");
      let grade = document.querySelector("#grade");
      let tableHeader = document.getElementById("#table-header");
      let table = document.getElementById("#myTable");
      let button = document.querySelector("#submit");

      // define class Parent with class declaration
      class Parent {
        constructor(parentFirstName, parentLastName, email, childName, grade) {
          this.parentFirstName = parentFirstName;
          this.parentLastName = parentLastName;
          this.email = email;
          this.childName = childName;
          this.grade = grade;
        }
        getInfo() {
          return (
            this.parentFirstName,
            this.parentLastName,
            this.email,
            this.childName,
            this.grade
          );
        }
      }

      // create extra instances of the object
      let parent1 = new Parent("Joe", "Brown", "joe@email.com", "Suzy", 2);
      parent1.getInfo();

      let parent2 = new Parent("Sal", "Meyer", "sal@email.com", "Ava", 4);
      parent2.getInfo();

      let parent3 = new Parent("Sheri", "Jones", "sheri@email.com", "Tommy", 3);
      parent3.getInfo();

      // array of all objects
      let allParents = [parent1, parent2, parent3];

      // array of all object names
      let allParentsName = [
        parent1.parentFirstName,
        parent2.parentFirstName,
        parent3.parentFirstName,
      ];

      // read input form
      function readInputForm(e) {
        e.preventDefault();

        const containerInput = document.querySelectorAll("#container-input");
        const values = Array.from(containerInput).map((el) => el.value);
        const res = allParents.filter((a) =>
          values.includes(a.parentFirstName)
        );
        display(res);
      }

      // onsubmit event
      // button.addEventListener("click", (e) => {
      //   e.preventDefault();

      //   const containerInput = document.querySelectorAll("#container-input");
      //   const values = Array.from(containerInput).map((el) => el.value);
      //   const res = allParents.filter((a) => values.includes(a.parentFirstName));
      //   display(res);
      // });

      // create new record
      function createRecord() {
        alert("createRecord works");
        let tbodyEl = document.querySelectorAll("#users");
        let newRow = tbodyEl[0].insertRow();
        return newRow;
      }

      // create new cell
      function createData(el, newTr) {
        alert("create data works");
        let newEl = document.createElement("td");
        let elementId = document.querySelectorAll("td").length;
        newEl.setAttribute("id", elementId);
        newEl.innerHTML = el;
        newTr.appendChild(newEl);
      }

      // print new record
      function display(element) {
        alert("display data");
        element.forEach((e) => {
          const newTr = createRecord();
          createData(e.parentFirstName, newTr);
          createData(e.parentLastNme, newTr);
          createData(e.email, newTr);
          createData(e.childName, newTr);
          createData(e.grade, newTr);
        });
      }

      // create columns

      // let cell1 = row.insertCell(0);
      // let cell2 = row.insertCell(1);
      // let cell3 = row.insertCell(2);
      // let cell4 = row.insertCell(3);
      // let cell5 = row.insertCell(4);

      // // print record to page
      // cell1.innerHTML = new Parent(0);
      // cell2.innerHTML = parent2.parentLastName;
      // cell3.innerHTML = new Parent(0);
      // cell4.innerHTML = parent2.childName;
      // cell5.innerHTML = parent2.grade;

      /** */

      // extra instances of the object
      // const parent1 = new Parent("Joe", "Brown", "joe@email.com", "Suzy", 2);
      // parent1.getInfo();

      // const parent2 = new Parent("Sal", "Meyer", "sal@email.com", "Ava", 4);
      // parent2.getInfo();

      // const parent3 = new Parent("Sheri", "Jones", "sheri@email.com", "Tommy", 3);
      // parent2.getInfo();

      // create columns
      // let row = tableHeader.insertRow(recordCount);
      // let cell1 = row.insertCell(0);
      // let cell2 = row.insertCell(1);
      // let cell3 = row.insertCell(2);
      // let cell4 = row.insertCell(3);
      // let cell5 = row.insertCell(4);

      // // print record to page
      // cell1.innerHTML = new Parent(0);
      // cell2.innerHTML = parent1.parentLastName;
      // cell3.innerHTML = new Parent(0);
      // cell4.innerHTML = parent1.childName;
      // cell5.innerHTML = parent1.grade;

      //   cell1.innerHTML = new Parent(0);
      //   cell2.innerHTML = parent2.parentLastName;
      //   cell3.innerHTML = new Parent(0);
      //   cell4.innerHTML = parent2.childName;
      //   cell5.innerHTML = parent2.grade;

      //     cell1.innerHTML = new Parent(0);
      //     cell2.innerHTML = parent3.parentLastName;
      //     cell3.innerHTML = new Parent(0);
      //     cell4.innerHTML = parent3.childName;
      //     cell5.innerHTML = parent3.grade;

      // recordCount++;

      //inputForm.onsubmit = addRecord();

      console.log("i am here");

      // inputForm.onsubmit = addRecord();
    </script>
    <!--****************-->

    <div class="container">
      <h1>Parent List</h1>
      <form id="input-form">
        <fieldset id="container-input">
          <label for="parent-first-name"
            >Parent's First Name: <span id="red">*</span></label
          >
          <input
            type="text"
            id="parent-first-name"
            class="form-input"
            name="parent-first-name"
          />

          <label for="parent-last-name"
            >Parent's Last Name: <span id="red">*</span></label
          >
          <input
            type="text"
            id="parent-last-name"
            class="form-input"
            name="parent-last-name"
          />

          <label for="email">Email Address: </label>
          <input
            type="email"
            id="email"
            class="form-input"
            name="email"
            placeholder="ex: name@email.com"
          />

          <label for="child-name"
            >Child's First Name: <span id="red">*</span></label
          >
          <input
            type="text"
            id="child-name"
            class="form-input"
            name="child-name"
          />

          <label for="grade">Child's Grade: </label>
          <input
            type="number"
            min="1"
            max="12"
            id="grade"
            class="form-input"
            name="grade"
          />

          <!-- <button id="submit" class="submit">Add Record</button> -->
          <button type="button" onclick="readInputForm()">Add Record</button>
        </fieldset>
      </form>

      <fieldset id="container-output">
        <table>
          <thead id="table-header">
            <tr>
              <th class="h-name">Parent's First Name</th>
              <th class="h-name">Parent's Last Name</th>
              <th class="h-email">Email</th>
              <th class="h-name">Child's First Name</th>
              <th class="h-grade">Child's Grade</th>
            </tr>
          </thead>
          <tbody id="users"></tbody>
          <tr>
            <td>
              <div id="myTable"></div>
            </td>
          </tr>
        </table>
      </fieldset>
    </div>

    <script type="type/javascript" src="index.js"></script>
  </body>
</html>
